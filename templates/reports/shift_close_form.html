{% extends "base.html" %}
{% block title %}Zamknięcie zmiany{% endblock %}

{% block content %}

<div class="row justify-content-center">
  <div class="col-md-6">

    <div class="card">
      <div class="card-body">

        <h4 class="card-title mb-4">
          Zamknięcie zmiany – {{ request.user.area.name|upper }}
        </h4>

        <form method="post">
          {% csrf_token %}

          <div class="mb-4">
            <div class="d-flex align-items-center gap-3">
              <span class="fw-medium">Poranna</span>

              <div class="form-check form-switch m-0">
                <input class="form-check-input"
                       type="checkbox"
                       id="shiftSwitch">
              </div>

              <span class="fw-medium">Popołudniowa</span>
            </div>

            <input type="hidden"
                   name="shift_type"
                   id="shiftTypeHidden"
                   value="morning">
          </div>

          <!-- CASH -->
          <div class="mb-3">
            <label class="form-label">Stan kasy</label>
            {{ form.closing_cash }}
          </div>

          <div class="mb-3">
            <label class="form-label">Wypłacona gotówka</label>
            {{ form.cash_removed }}
          </div>

          <!-- LAUNDRY -->
          <div class="mb-3">
            <div class="d-flex align-items-center gap-2">

            <label for="id_laundry_delivery"
                   class="form-label mb-0">
              Dostawa prania na zmianie
            </label>

            {{ form.laundry_delivery }}

            <span class="text-muted small">
              (zaznacz jeśli tak)
            </span>

            </div>
          </div>

          <!-- NOTES -->
          <div class="mb-4">
            <label class="form-label">
              Notatka (np. rozbieżność, uwaga do ASup)
            </label>
            {{ form.notes }}
          </div>

          <button type="submit"
                  class="btn btn-primary w-100">
            Zapisz raport
          </button>

        </form>

      </div>
    </div>

  </div>
</div>

{% endblock %}
{% block scripts %}
<script>
document.addEventListener("DOMContentLoaded", function () {

  const switchInput = document.getElementById("shiftSwitch");
  const hiddenField = document.getElementById("shiftTypeHidden");

  switchInput.addEventListener("change", function () {
      if (this.checked) {
          hiddenField.value = "afternoon";
      } else {
          hiddenField.value = "morning";
      }
  });

});
</script>
{% endblock %}